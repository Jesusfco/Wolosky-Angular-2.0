<mat-progress-bar mode="indeterminate" *ngIf="request" class="barLoader"></mat-progress-bar>

<div class="relative">
    <h1 class="routeTitle">GASTOS</h1>

    <a *ngIf="storage.getUserType() >= 6" class="linkExcel" href="{{ storage.getUrl() + 'excel/expenses' + storage.getTokenUrl() }}
    &from={{ search.from }}&to={{ search.to }}&id={{ search.id }}">
        <p>Exportar a Excel</p>
        <img src="http://icons.iconarchive.com/icons/graphicloads/filetype/256/excel-xls-icon.png">
    </a>

    <input [(ngModel)]="search.from" name="from" type="date">
    <input [(ngModel)]="search.to" name="to" type="date">

    <button (click)="get()">Buscar</button>

    <div class="responsive-table">

        <table align="center">

            <thead>
                <tr>
                    <th class="left">ID</th>
                    <th>Monto</th>
                    <th>Nombre</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                </tr>
                <!-- <th colspan="3">Opciones</th> -->
            </thead>

            <tbody *ngIf="storage.getUserType() >= 6">
                <tr *ngFor="let ex of expenses" [routerLink]="['/expenses/edit', ex.$id]" (click)="updateStartObservable()">
                    <td class="left">{{ ex.$id }}</td>
                    <td>$ {{ ex.$amount }}</td>
                    <td>{{ ex.$name }}</td>
                    <td>{{ ex.$created_at | date: format}}</td>
                    <td>{{ ex.$created_at | date: 'hh:mm a' }}</td>
                </tr>
            </tbody>

            <tbody *ngIf="storage.getUserType == 3">
                <tr *ngFor="let ex of expenses">
                    <td class="left">{{ ex.$id }}</td>
                    <td>$ {{ ex.$amount }}</td>
                    <td>{{ ex.$name }}</td>
                    <td>{{ ex.$created_at | date: format}}</td>
                    <td>{{ ex.$created_at | date: 'hh:mm a' }}</td>
                </tr>
            </tbody>

        </table>

        <mat-paginator (page)="pageAction($event)" [length]="search.total" [pageSize]="search.items" [pageSizeOptions]="[5, 10, 25, 50, 100]">
        </mat-paginator>

    </div>

</div>

<a (click)="redirectCreate()">
    <div class="botonFloat">
        <a class="botonA" matTooltip="Crear recibo"><i class="material-icons">add</i></a>
    </div>
</a>

<router-outlet></router-outlet>