<div class="background" [@background]="backgroundState"></div>
<div id="createCard" [@principal]="cardState">

    <div id="cerrarBtn" (click)="close()"> Cerrar <i class="material-icons">close</i></div>

    <div class=" container">
        <h1 align="center">Asignar Referencias</h1><br>

        <form (submit)="form()" *ngIf="!toUpdate">
            <br>

            <div>
                <label>Nombre completo:</label><br>
                <input type="text" [(ngModel)]="reference.name" name="name" placeholder="Nombre Completo" (keydown)="nameUpper()">
                <small class="inputError" *ngIf="validations.name == 1">Requerido</small>
            </div>

            <div>
                <label>Parentesco:</label><br>
                <select [(ngModel)]="reference.relationship_id" name="relationship_id" placeholder="Parentesco">
                        <option *ngFor="let x of relationshipOptions" value="{{x.value}}">{{x.view}}</option>               
                    </select>
            </div>

            <div>
                <label>Telefono:</label><br>
                <input type="phone" [(ngModel)]="reference.phone" name="phone" placeholder="Telefono">

            </div>

            <div>
                <label>Correo</label><br>
                <input type="mail" [(ngModel)]="reference.email" name="email" placeholder="Correo" (keydown)="mailUpper()">
                <small *ngIf="validations.nuMail == 1">Se requiere el Correo/Telefono</small>
            </div>


            <button type="submit">Aceptar</button>

        </form>

        <form (submit)="update()" *ngIf="toUpdate">
            <br>

            <div>
                <label>Correo</label><br>
                <input type="text" [(ngModel)]="referenceToModify.name" name="name" placeholder="Nombre Completo" (keydown)="nameModifyUpper()">
                <small *ngIf="validations.nuMail == 1">Se requiere el Correo/Telefono</small>
            </div>


            <select [(ngModel)]="referenceToModify.relationship_id" name="relationship_id" placeholder="Parentesco">
                    <option *ngFor="let x of relationshipOptions" value="{{x.value}}">{{x.view}}</option>               
                </select>

            <input type="phone" [(ngModel)]="referenceToModify.phone" name="phone" placeholder="Telefono">
            <input type="mail" [(ngModel)]="referenceToModify.email" name="email" placeholder="Correo" (keydown)="mailModifyUpper()">

            <button type="submit">Aceptar</button>

        </form>



        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Parentesco</th>
                    <th>Nombre</th>
                    <th>Eliminar</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let x of references">
                    <th>{{ x.id }}</th>
                    <th>{{ x.relationshipView }}</th>
                    <th (click)="selectReference(x)">{{ x.name }}</th>
                    <th><button (click)="deleteReference(x)">Eliminar</button></th>
                </tr>
            </tbody>
        </table>
    </div>
</div>